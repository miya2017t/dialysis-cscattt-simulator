<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é€æå®¤é˜²ç½CSCATTTè¨“ç·´</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .lucide { width: 1.5rem; height: 1.5rem; }
  </style>
</head>
<body class="bg-slate-50">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const Icon = ({ name, className = "" }) => {
      useEffect(() => { if (window.lucide) window.lucide.createIcons(); });
      return <i data-lucide={name} className={className}></i>;
    };

    const App = () => {
      const [step, setStep] = useState('landing');
      const [situation, setSituation] = useState(null);
      const [role, setRole] = useState('');
      const [currentIndex, setCurrentIndex] = useState(0);
      const [answers, setAnswers] = useState({});
      const [currentInput, setCurrentInput] = useState('');
      const [hintsUsed, setHintsUsed] = useState(0);
      const [showHint, setShowHint] = useState(false);
      const [copyStatus, setCopyStatus] = useState('ã‚³ãƒ”ãƒ¼ã™ã‚‹');

      const situations = [
        { id: 'fire', label: 'ç«ç½', icon: 'flame', color: 'text-red-500', desc: 'ç…™ã®åºƒãŒã‚Šã¨ç†±ã€å»¶ç„¼ã®ææ€–ã€‚é¿é›£çµŒè·¯ã®é®æ–­ãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯ã§ã™ã€‚' },
        { id: 'earthquake', label: 'å·¨å¤§åœ°éœ‡', icon: 'zap', color: 'text-yellow-600', desc: 'æ¿€ã—ã„æºã‚Œã€ç‰©å“ã®æ•£ä¹±ã€ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³ã®åœæ­¢ã€‚è¶³å…ƒã®å±é™ºãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯ã§ã™ã€‚' },
        { id: 'flood', label: 'æµ¸æ°´ãƒ»æ°´å®³', icon: 'waves', color: 'text-blue-500', desc: 'å¾ã€…ã«ä¸ŠãŒã‚‹æ°´ä½ã€‚å­¤ç«‹ã®ä¸å®‰ã¨ã€åŒ»ç™‚ç¶™ç¶šã®é™ç•ŒãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯ã§ã™ã€‚' }
      ];

      const roles = [
        { id: 'center-head', label: 'ã‚»ãƒ³ã‚¿ãƒ¼é•·', description: 'å…¨ä½“çµ±æ‹¬ãƒ»å¯¾å¤–èª¿æ•´' },
        { id: 'floor-leader', label: 'ãƒ•ãƒ­ã‚¢è²¬ä»»è€…', description: 'ç¾å ´æŒ‡æ®ãƒ»æŒ‡ç¤ºå‡ºã—' },
        { id: 'chief', label: 'ä¸»ä»»', description: 'å®Ÿå‹™èª¿æ•´ãƒ»ãƒªãƒ¼ãƒ€ãƒ¼è£œåŠ©' },
        { id: 'sub-chief', label: 'å‰¯ä¸»ä»»', description: 'å‹•ç·šç¢ºä¿ãƒ»å®Ÿå‹™ã®è¦' },
        { id: 'engineer', label: 'æŠ€å£«', description: 'æ©Ÿå™¨å®‰å…¨ãƒ»MEè³‡ç”£ä¿è­·' },
        { id: 'other', label: 'ãã®ä»–', description: 'ã‚µãƒãƒ¼ãƒˆãƒ»ä¸€èˆ¬ã‚¹ã‚¿ãƒƒãƒ•' }
      ];

      const scenario = [
        { id: 'Command', title: 'Commandï¼ˆæŒ‡æ®ãƒ»çµ±åˆ¶ï¼‰', icon: 'users', intent: 'ç¾å ´ã®æ··ä¹±ã‚’æŠ‘ãˆã€æƒ…å ±ã®æµã‚Œã¨åˆ¤æ–­ã®è²¬ä»»è€…ã‚’æ˜ç¢ºã«ã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'ç½å®³ç™ºç”Ÿç›´å¾Œã€‚å‘¨å›²ã®ã‚¹ã‚¿ãƒƒãƒ•ã‚„æ‚£è€…ãŒã‚ãªãŸã®å‹•ãã«æ³¨ç›®ã—ã€ä¸å®‰ãŒåºƒãŒã£ã¦ã„ã¾ã™ã€‚' },
        { id: 'Safety', title: 'Safetyï¼ˆå®‰å…¨ç¢ºä¿ï¼‰', icon: 'shield', intent: 'è‡ªåˆ†è‡ªèº«ã®å®‰å…¨ã€ã‚¹ã‚¿ãƒƒãƒ•ã®å®‰å…¨ã€ãã—ã¦ç¾å ´ã®å®‰å…¨ã‚’ç¢ºèªã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'ã‚ãªãŸãŒå€’ã‚Œã‚Œã°æ•‘ãˆã‚‹å‘½ã‚‚æ•‘ãˆã¾ã›ã‚“ã€‚å‘¨å›²ã«è¿«ã‚‹ç›®ã«è¦‹ãˆã‚‹å±é™ºã€è¦‹ãˆãªã„å±é™ºã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚' },
        { id: 'Communication', title: 'Communicationï¼ˆæƒ…å ±ä¼é”ï¼‰', icon: 'message-square', intent: 'å¿…è¦ãªæƒ…å ±ã‚’ã€å¿…è¦ãªç›¸æ‰‹ã¸ã€ç¢ºå®Ÿã‹ã¤ç°¡æ½”ã«å±Šã‘ã‚‹ãŸã‚ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'é¨’éŸ³ã‚„æ··ä¹±ã®ä¸­ã§ã€ã€Œèª°ã«ä½•ã‚’ä¼ãˆãŸã‹ã€ã ã‘ã§ãªãã€Œç›¸æ‰‹ãŒã©ã†å—ã‘å–ã£ãŸã‹ã€ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚' },
        { id: 'Assessment', title: 'Assessmentï¼ˆè©•ä¾¡ï¼‰', icon: 'activity', intent: 'è¢«å®³ã®å¤§ãã•ã¨ã€ä»Šã™ãå¯¾å¿œãŒå¿…è¦ãªå¯¾è±¡ã®æ•°ã‚’æ­£ç¢ºã«æŠŠæ¡ã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'ç›®ã®å‰ã®ä¸€äººã ã‘ã§ãªãã€ãƒ•ãƒ­ã‚¢å…¨ä½“ã‚’è¦‹æ¸¡ã—ã€èµ·ãã¦ã„ã‚‹äº‹è±¡ã®å…¨ä½“åƒã‚’æã„ã¦ãã ã•ã„ã€‚' },
        { id: 'Triage', title: 'Triageï¼ˆé¸åˆ¥ï¼‰', icon: 'alert-triangle', intent: 'é™ã‚‰ã‚ŒãŸè³‡æºã§æœ€å¤§ã®åŠ¹æœã‚’ä¸Šã’ã‚‹ãŸã‚ã€å¯¾å¿œã®å„ªå…ˆé †ä½ã‚’æ±ºã‚ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'å…¨å“¡ã‚’åŒæ™‚ã«ã¯åŠ©ã‘ã‚‰ã‚Œãªã„çŠ¶æ³ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä½•ã‚’åŸºæº–ã«ã€Œé‡ã¿ã€ã‚’ã¤ã‘ã¾ã™ã‹ã€‚' },
        { id: 'Treatment', title: 'Treatmentï¼ˆå¿œæ€¥å‡¦ç½®ï¼‰', icon: 'stethoscope', intent: 'æ¬¡ã®å ´æ‰€ã¸ç§»å‹•ã™ã‚‹ãŸã‚ã«ã€æœ€ä½é™å¿…è¦ãªåŒ»ç™‚å‡¦ç½®ã‚’è¡Œã†ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'å®Œç’§ãªæ²»ç™‚ã¯ä¸è¦ã§ã™ã€‚ã€Œå‘½ã‚’ã¤ãªããŸã‚ã€ã€Œç§»å‹•ã•ã›ã‚‹ãŸã‚ã€ã«å‰Šãè½ã¨ã—ãŸå‡¦ç½®ã‚’è€ƒãˆã¾ã™ã€‚' },
        { id: 'Transport', title: 'Transportï¼ˆæ¬é€ï¼‰', icon: 'send', intent: 'ä»Šã„ã‚‹å±é™ºãªå ´æ‰€ã‹ã‚‰ã€ã‚ˆã‚Šå®‰å…¨ãªå ´æ‰€ã¸æ‚£è€…ã‚’ç§»å‹•ã•ã›ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'ç§»å‹•ãã®ã‚‚ã®ãŒãƒªã‚¹ã‚¯ã«ãªã‚‹æ‚£è€…ã‚‚ã„ã¾ã™ã€‚ç›®çš„åœ°ã¾ã§ã®çµŒè·¯ã¨æ‰‹æ®µã€ãã®ãƒªã‚¹ã‚¯ã‚’è€ƒæ…®ã—ã¦ãã ã•ã„ã€‚' }
      ];

      const hintData = {
        'fire': {
          'Command': { hint: ["ç¾åœ¨ã®ãƒ•ãƒ­ã‚¢è²¬ä»»è€…ã¯èª°ã‹ï¼Ÿ", "æŒ‡ç¤ºãŒé€”åˆ‡ã‚ŒãŸæ™‚ã€ã©ã“ã¾ã§åˆ¤æ–­ã—ã¦è‰¯ã„ã‹ï¼Ÿ"], point: "ç½å®³æ™‚ã¯ã€å½¹è·ã€ã‚ˆã‚Šã€æ©Ÿèƒ½ã€ãŒå„ªå…ˆã•ã‚Œã‚‹" },
          'Safety': { hint: ["ç…™ã®é«˜ã•ã¯ï¼Ÿï¼ˆå¤©äº•ã‹ã€æ‚£è€…ã®é¡”ã‹ï¼‰", "ç©ºèª¿ã§ç…™ãŒæµã‚Œè¾¼ã‚€å¯èƒ½æ€§ã¯ï¼Ÿ"], point: "è¦‹ãˆãªã„COï¼ˆä¸€é…¸åŒ–ç‚­ç´ ï¼‰ã¯è©•ä¾¡ã•ã‚Œã«ãã„" },
          'Communication': { hint: ["é¨’éŸ³ã§å£°ãŒé€šã‚‰ãªã„æ™‚ã€ã©ã†ä¼ãˆã‚‹ã‹ï¼Ÿ", "æ‚£è€…ã¸ã®æŒ‡ç¤ºã¯çŸ­ãé™å®šã—ã¦ã„ã‚‹ã‹ï¼Ÿ"], point: "ã€ä¼ãˆãŸã€ã§ã¯ãªãã€ä¼ã‚ã£ãŸã€ã‹ãŒé‡è¦" },
          'Assessment': { hint: ["ã©ã®æ™‚ç‚¹ã§ã€å›è·¯ã‚’çŠ ç‰²ã«ã™ã‚‹ã€ã¨æ±ºã‚ã‚‹ã‹ï¼Ÿ", "å›è·¯ãƒˆãƒ©ãƒ–ãƒ«ã«ã‚ˆã‚‹äºŒæ¬¡ç½å®³ã¯ï¼Ÿ"], point: "è¡€æ¶²æ±šæŸ“ã¯é¿é›£å‹•ç·šã‚’å¡ã" },
          'Triage': { hint: ["ã€æ­©ã‘ã‚‹ã€æ‚£è€…ã®ä½è¡€åœ§ã‚„ãµã‚‰ã¤ãã¯ï¼Ÿ", "èª°ã‚’ä»Šã™ãã€èª°ã‚’æ”¯æ´ä»˜ãã§å‹•ã‹ã™ã‹ï¼Ÿ"], point: "é€ææ‚£è€…ã®æ­©è¡Œå¯èƒ½æ™‚é–“ã¯çŸ­ã„" },
          'Treatment': { hint: ["çœç•¥ã—ã¦ã‚ˆã„ä½œæ¥­ã¨ã€çµ¶å¯¾ã«ãƒ€ãƒ¡ãªä½œæ¥­ã¯ï¼Ÿ", "å›è·¯ã‚¯ãƒ©ãƒ³ãƒ—ãƒ»æ­¢è¡€ã®å„ªå…ˆé †ä½ã¯ï¼Ÿ"], point: "ç½å®³åŒ»ç™‚ã«å®Œç’§ã¯ä¸è¦ã€æ™‚é–“ï¼å®‰å…¨" },
          'Transport': { hint: ["éšæ®µç§»å‹•ã«è€ãˆã‚‰ã‚Œã‚‹ã‹ï¼Ÿ", "é€”ä¸­ã§å‹•ã‘ãªããªã£ãŸæ™‚ã®ä»£æ›¿ãƒ«ãƒ¼ãƒˆã¯ï¼Ÿ"], point: "ç§»å‹•ä¸­ã«æ‚ªåŒ–ã™ã‚‹æ‚£è€…ãŒæœ€ã‚‚å±é™º" }
        },
        'earthquake': {
          'Command': { hint: ["å…¨ã‚¹ã‚¿ãƒƒãƒ•ã®å®‰å¦ã‚’å³åº§ã«ç¢ºèªã§ãã‚‹ã‹ï¼Ÿ", "ä½™éœ‡ãŒç¶šãä¸­ã§ã®æŒ‡æ®ç³»çµ±ã¯ã©ã†ãªã‚‹ï¼Ÿ"], point: "æ··ä¹±æœŸã¯èª°ãŒæ±ºå®šæ¨©ã‚’æŒã¤ã‹æ˜ç¢ºã«ã™ã‚‹" },
          'Safety': { hint: ["ã‚¬ãƒ©ã‚¹ã€æ£šã€é€ææ©Ÿã®è»¢å€’ã®å±é™ºã¯ï¼Ÿ", "é¿é›£çµŒè·¯ã«éšœå®³ç‰©ã¯è½ã¡ã¦ã„ãªã„ã‹ï¼Ÿ"], point: "ä¸Šã‹ã‚‰ã®è½ä¸‹ç‰©ã€æ¨ªã‹ã‚‰ã®ç§»å‹•ç‰©ã«æ³¨æ„" },
          'Communication': { hint: ["åœé›»ã§é›»è©±ãŒä½¿ãˆãªã„å ´åˆã®é€£çµ¡æ‰‹æ®µã¯ï¼Ÿ", "å¤–éƒ¨ï¼ˆæœ¬éƒ¨ã‚„ä»–æ–½è¨­ï¼‰ã¨ã®é€£æºæ–¹æ³•ã¯ï¼Ÿ"], point: "ã‚¢ãƒŠãƒ­ã‚°ãªæƒ…å ±ä¼é”ï¼ˆãƒ¡ã‚¬ãƒ›ãƒ³ã€ç´™ï¼‰ã‚’æƒ³å®š" },
          'Assessment': { hint: ["æ©Ÿå™¨ã®ç ´æçŠ¶æ³ã¨ã€é€æç¶™ç¶šã®å¯å¦ã¯ï¼Ÿ", "ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³ï¼ˆæ°´ãƒ»é›»æ°—ï¼‰ã®æ®‹é‡ã¯ï¼Ÿ"], point: "ã‚¤ãƒ³ãƒ•ãƒ©åœæ­¢æ™‚ã¯æ²»ç™‚ç¶™ç¶šãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯" },
          'Triage': { hint: ["é‡ç—‡è€…ã¨ã€ç‹¬æ­©å¯èƒ½è€…ã®ä»•åˆ†ã‘ã¯ï¼Ÿ", "ãƒ‘ãƒ‹ãƒƒã‚¯çŠ¶æ…‹ã®æ‚£è€…ã¸ã®å¯¾å¿œã¯ï¼Ÿ"], point: "ç²¾ç¥çš„ãªå‹•æºã‚‚ãƒˆãƒªã‚¢ãƒ¼ã‚¸ã®å¯¾è±¡" },
          'Treatment': { hint: ["åœé›»æ™‚ã®ç·Šæ€¥é›¢è„±æ‰‹é †ã¯å¾¹åº•ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ", "æ‰‹å‹•ã§ã®è¿”è¡€ã¯å¯èƒ½ã‹ï¼Ÿ"], point: "é›»æ°—ãŒãªã„å‰æã§ã®æœ€å°é™ã®å‡¦ç½®ã‚’" },
          'Transport': { hint: ["ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼åœæ­¢æ™‚ã®éšæ®µæ¬é€ã®äººå“¡ã¯ï¼Ÿ", "å±‹å¤–ã®å®‰å…¨åœ°å¸¯ã¯ç¢ºä¿ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ"], point: "ä½™éœ‡ã«ã‚ˆã‚‹äºŒæ¬¡ç½å®³ã‚’è€ƒæ…®ã—ãŸçµŒè·¯é¸å®š" }
        },
        'flood': {
            'Command': { hint: ["å‚ç›´é¿é›£ã‹ã€åºƒåŸŸæ¬é€ã‹ã®åˆ¤æ–­æ™‚æœŸã¯ï¼Ÿ", "1éšãŒæ­»å®ˆã§ããªã„å ´åˆã®æŒ‡æ®æ‰€ç§»å‹•ã¯ï¼Ÿ"], point: "æœ€æ‚ªã®ã‚·ãƒŠãƒªã‚ªã‚’å…ˆèª­ã¿ã—ã¦å‹•ã" },
            'Safety': { hint: ["é›»æ°—è¨­å‚™ã¸ã®æµ¸æ°´ã«ã‚ˆã‚‹æ„Ÿé›»ãƒªã‚¹ã‚¯ã¯ï¼Ÿ", "å­¤ç«‹ã—ãŸå ´åˆã®å‚™è“„ï¼ˆé£Ÿæ–™ãƒ»æ°´ï¼‰ã®å ´æ‰€ã¯ï¼Ÿ"], point: "æµ¸æ°´ã—ãŸæ°´ã¯æ±šæŸ“ã•ã‚Œã¦ã„ã‚‹ã¨è€ƒãˆã‚‹" },
            'Communication': { hint: ["æ•‘åŠ©è¦è«‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯æ˜ç¢ºã‹ï¼Ÿ", "æ‚£è€…å®¶æ—ã¸ã®é€£çµ¡ã¯ã©ã†ã™ã‚‹ã‹ï¼Ÿ"], point: "å­¤ç«‹ã‚’å‰æã¨ã—ãŸé€šä¿¡æ‰‹æ®µã®ç¢ºä¿" },
            'Assessment': { hint: ["æµ¸æ°´ã‚¹ãƒ”ãƒ¼ãƒ‰ã®æŠŠæ¡ãŒã§ãã¦ã„ã‚‹ã‹ï¼Ÿ", "2éšä»¥ä¸Šã®ãƒ•ãƒ­ã‚¢ã«åå®¹ã§ãã‚‹é™ç•Œäººæ•°ã¯ï¼Ÿ"], point: "æ™‚é–“çµŒéã¨ã¨ã‚‚ã«æ‚ªåŒ–ã™ã‚‹çŠ¶æ³ã‚’äºˆæ¸¬" },
            'Triage': { hint: ["å…ˆã«ä¸Šéšã¸ç§»ã™ã¹ãæ‚£è€…ã®æ¡ä»¶ã¯ï¼Ÿ", "ç§»å‹•æ‰‹æ®µï¼ˆãƒœãƒ¼ãƒˆç­‰ï¼‰ã®å„ªå…ˆé †ä½ã¯ï¼Ÿ"], point: "ä½“æ¸©ä½ä¸‹ï¼ˆä½ä½“æ¸©ç—‡ï¼‰ã®ãƒªã‚¹ã‚¯ã‚‚è€ƒæ…®" },
            'Treatment': { hint: ["è¡›ç”ŸçŠ¶æ…‹ãŒæ‚ªåŒ–ã™ã‚‹ä¸­ã§ã®æ„ŸæŸ“é˜²æ­¢ã¯ï¼Ÿ", "åŒ»è–¬å“ã®ç§»å‹•ã¯æ¸ˆã‚“ã§ã„ã‚‹ã‹ï¼Ÿ"], point: "é™ã‚‰ã‚ŒãŸç‰©è³‡ã§ã®å»¶å‘½ã‚’è€ƒãˆã‚‹" },
            'Transport': { hint: ["æš—ã„ä¸­ã§ã®å‚ç›´é¿é›£ã®ãƒªã‚¹ã‚¯ã¯ï¼Ÿ", "æ¬é€çµŒè·¯ã«æ°´ãŒæºœã¾ã£ã¦ã„ãªã„ã‹ï¼Ÿ"], point: "æ°´ã®æ·±ã•ãŒè†ã‚’è¶…ãˆã‚‹ã¨ç§»å‹•ã¯å›°é›£" }
        }
      };

      const handleRandomSituation = () => {
        const random = situations[Math.floor(Math.random() * situations.length)];
        setSituation(random);
      };

      const handleNext = () => {
        setAnswers({ ...answers, [scenario[currentIndex].id]: { text: currentInput, hintUsed: showHint } });
        setCurrentInput('');
        setShowHint(false);
        if (currentIndex < scenario.length - 1) {
          setCurrentIndex(currentIndex + 1);
        } else {
          setStep('result');
        }
      };

      const copyToClipboard = () => {
        const now = new Date().toLocaleString('ja-JP');
        let log = `ã€é€æå®¤ç½å®³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»æ€è€ƒãƒ­ã‚°ã€‘\nå®Ÿæ–½æ—¥æ™‚ï¼š${now}\nçŠ¶æ³ï¼š${situation?.label} / å½¹å‰²ï¼š${role}\n\n`;
        scenario.forEach(s => {
          log += `â–  ${s.title}\næ€è€ƒï¼š${answers[s.id]?.text || '(æœªå…¥åŠ›)'}\n${answers[s.id]?.hintUsed ? '(â€»ãƒ’ãƒ³ãƒˆæ´»ç”¨)' : ''}\n\n`;
        });
        
        navigator.clipboard.writeText(log).then(() => {
          alert("ã‚³ãƒ”ãƒ¼å®Œäº†ï¼\nAIï¼ˆGeminiç­‰ï¼‰ã«è²¼ã‚Šä»˜ã‘ã¦å¯¾è©±ã‚’å§‹ã‚ã¦ãã ã•ã„ã€‚");
          setCopyStatus('ã‚³ãƒ”ãƒ¼å®Œäº†ï¼');
          setTimeout(() => setCopyStatus('ã‚³ãƒ”ãƒ¼ã™ã‚‹'), 2000);
        });
      };

      // --- UI å„ç”»é¢ ---

      if (step === 'landing') {
        return (
          <div className="min-h-screen bg-slate-900 text-slate-100 flex flex-col items-center justify-center p-6 text-center">
            <div className="w-24 h-24 bg-blue-600 rounded-3xl flex items-center justify-center shadow-2xl mb-8 rotate-3">
              <Icon name="shield" className="w-12 h-12 text-white" />
            </div>
            <h1 className="text-3xl font-black mb-4 tracking-tight">é€æå®¤é˜²ç½<br /><span className="text-blue-500">CSCATTT</span> è¨“ç·´</h1>
            <p className="text-slate-400 mb-8 max-w-xs text-sm">æ€è€ƒã‚’æ•´ç†ã—ã€AIã¨å¯¾è©±ã™ã‚‹ç ”ä¿®ãƒ„ãƒ¼ãƒ«</p>
            <button onClick={() => setStep('situation-select')} className="w-full max-w-xs py-4 bg-blue-600 rounded-xl font-bold text-lg shadow-lg active:scale-95 transition-all">è¨“ç·´ã‚’å§‹ã‚ã‚‹</button>
          </div>
        );
      }

      if (step === 'situation-select') {
        return (
          <div className="min-h-screen bg-slate-50 flex items-center justify-center p-4 text-sm sm:text-base">
            <div className="max-w-xl w-full bg-white rounded-2xl shadow-xl p-8 border border-slate-200">
              <h1 className="text-2xl font-bold text-center text-slate-800 mb-8">ç½å®³çŠ¶æ³ã®é¸æŠ</h1>
              <div className="grid grid-cols-1 gap-4 mb-6">
                {situations.map((s) => (
                  <button key={s.id} onClick={() => setSituation(s)} className={`p-4 border-2 rounded-xl flex items-center gap-4 transition-all ${situation?.id === s.id ? 'border-blue-500 bg-blue-50 ring-4 ring-blue-50' : 'border-slate-100 hover:border-slate-200'}`}>
                    <div className={`p-3 rounded-lg ${situation?.id === s.id ? 'bg-blue-600 text-white' : 'bg-slate-100'}`}><Icon name={s.icon} className={situation?.id === s.id ? "" : s.color} /></div>
                    <div className="text-left font-bold text-slate-800">{s.label}<div className="text-[11px] text-slate-500 font-normal leading-tight">{s.desc}</div></div>
                  </button>
                ))}
                <button onClick={handleRandomSituation} className="p-4 border-2 border-dashed border-slate-300 rounded-xl flex items-center justify-center gap-3 hover:bg-slate-50 text-slate-600 transition-all">
                  <Icon name="dices" /> <span className="font-bold">ãƒ©ãƒ³ãƒ€ãƒ ã«æ±ºå®šã™ã‚‹</span>
                </button>
              </div>
              <button disabled={!situation} onClick={() => setStep('role-select')} className={`w-full py-4 rounded-xl font-bold ${situation ? 'bg-blue-600 text-white shadow-lg' : 'bg-slate-200 text-slate-400'}`}>æ¬¡ã¸ï¼šå½¹å‰²ã‚’é¸ã¶</button>
            </div>
          </div>
        );
      }

      if (step === 'role-select') {
        return (
          <div className="min-h-screen bg-slate-50 flex items-center justify-center p-4">
            <div className="max-w-xl w-full bg-white rounded-2xl shadow-xl p-8">
              <h1 className="text-2xl font-bold text-center mb-8">ã‚ãªãŸã®å½¹å‰²ã¯ï¼Ÿ</h1>
              <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
                {roles.map((r) => (
                  <button key={r.id} onClick={() => { setRole(r.label); setStep('simulation'); }} className="p-4 border-2 border-slate-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 text-left transition-all">
                    <div className="font-bold text-slate-800">{r.label}</div>
                    <div className="text-xs text-slate-500">{r.description}</div>
                  </button>
                ))}
              </div>
            </div>
          </div>
        );
      }

      if (step === 'simulation') {
        const current = scenario[currentIndex];
        const progress = ((currentIndex + 1) / scenario.length) * 100;
        const hint = hintData[situation.id]?.[current.id];

        return (
          <div className="min-h-screen bg-slate-50 flex flex-col items-center p-4">
            <div className="max-w-2xl w-full">
              <div className="w-full bg-slate-200 h-1.5 rounded-full mb-6 mt-4 overflow-hidden text-[0px]">
                <div className="bg-blue-600 h-full transition-all" style={{ width: `${progress}%` }}>.</div>
              </div>
              <div className="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-200">
                <div className="bg-slate-800 p-6 flex items-center gap-4 text-white">
                  <div className="p-3 bg-blue-600 rounded-lg shadow-inner"><Icon name={current.icon} /></div>
                  <h2 className="text-xl font-bold">{current.title}</h2>
                </div>
                <div className="p-8 space-y-6">
                  <div className="bg-slate-50 border border-slate-200 p-5 rounded-xl flex gap-3 shadow-sm text-sm">
                    <Icon name="book-open" className="text-blue-500 shrink-0" />
                    <p className="font-medium text-slate-800 leading-relaxed">{current.intent}</p>
                  </div>
                  <p className="text-slate-600 text-[13px] italic border-l-4 border-amber-400 pl-4">{current.context}</p>
                  
                  {/* â˜…ãƒ’ãƒ³ãƒˆè¡¨ç¤ºï¼†åˆ¶é™ãƒ­ã‚¸ãƒƒã‚¯ä¿®æ­£â˜… */}
                  {showHint ? (
                    <div className="bg-amber-50 border border-amber-200 rounded-xl p-5 animate-in fade-in duration-300">
                      <h4 className="text-amber-800 font-bold text-xs mb-3 flex items-center gap-2 uppercase tracking-wider">
                        <Icon name="help-circle" className="w-4 h-4" /> æ€è€ƒã‚’æ·±ã‚ã‚‹ãƒ’ãƒ³ãƒˆ
                      </h4>
                      <ul className="space-y-2 mb-4">
                        {hint.hint.map((h, i) => (
                          <li key={i} className="text-slate-700 text-sm bg-white p-3 rounded-lg border border-amber-100 shadow-sm italic font-medium">" {h} "</li>
                        ))}
                      </ul>
                      <div className="bg-amber-200/40 p-3 rounded-lg text-amber-900 text-[11px] font-bold">
                        ğŸ’¡ POINT: {hint.point}
                      </div>
                    </div>
                  ) : (
                    <button 
                      disabled={hintsUsed >= 2} // 2å›ä½¿ã£ãŸã‚‰ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                      onClick={() => { 
                        if (hintsUsed < 2) {
                          setShowHint(true); 
                          setHintsUsed(hintsUsed + 1); 
                        }
                      }} 
                      className={`w-full py-3 rounded-xl flex items-center justify-center gap-2 font-bold border transition-all ${
                        hintsUsed >= 2 
                        ? 'bg-slate-200 text-slate-400 border-slate-300 cursor-not-allowed opacity-75' 
                        : 'bg-amber-100 text-amber-700 border-amber-200 hover:bg-amber-200 active:scale-[0.98]'
                      }`}
                    >
                      <Icon name="help-circle" /> 
                      {hintsUsed >= 2 ? "ãƒ’ãƒ³ãƒˆã¯ä½¿ã„åˆ‡ã‚Šã¾ã—ãŸ" : `ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤º (æ®‹ã‚Š${2-hintsUsed}å›)`}
                    </button>
                  )}

                  <div className="space-y-1">
                    <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-1">Thinking Note</label>
                    <textarea value={currentInput} onChange={(e) => setCurrentInput(e.target.value)} className="w-full p-5 border-2 border-slate-100 rounded-xl h-40 focus:border-blue-500 outline-none transition-all shadow-inner text-sm" placeholder={`${role}ã¨ã—ã¦è€ƒãˆã‚‹ã“ã¨ã¯...`} />
                  </div>

                  <button onClick={handleNext} className="w-full py-4 bg-blue-600 text-white font-bold rounded-xl shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2">
                    {currentIndex === 6 ? 'çµæœã‚’è¦‹ã‚‹' : 'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸'} <Icon name="check-circle" className="w-5 h-5" />
                  </button>
                </div>
              </div>
            </div>
          </div>
        );
      }

      if (step === 'result') {
        return (
          <div className="min-h-screen bg-slate-50 p-6 flex flex-col items-center">
            <div className="max-w-2xl w-full bg-white p-10 rounded-2xl shadow-xl text-center border-b-8 border-blue-600">
              <div className="w-20 h-20 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner">
                <Icon name="check-circle" className="w-12 h-12" />
              </div>
              <h1 className="text-2xl font-bold mb-4">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†</h1>
              <p className="text-slate-500 text-sm mb-8 italic">æ€è€ƒãŒæ•´ç†ã•ã‚Œã¾ã—ãŸã€‚ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒ¼ã—ã€AIã¨å¯¾è©±ã‚’æ·±ã‚ã¦ãã ã•ã„ã€‚</p>
              <button onClick={copyToClipboard} className="w-full py-4 bg-blue-600 text-white rounded-xl font-bold mb-4 shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2">
                <Icon name="copy" className="w-5 h-5" /> {copyStatus}
              </button>
              <button onClick={() => location.reload()} className="w-full py-4 bg-slate-100 text-slate-500 rounded-xl font-bold hover:bg-slate-200 transition-all border border-slate-200">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
            </div>
          </div>
        );
      }
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€æå®¤é˜²ç½CSCATTTè¨“ç·´</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const App = () => {
            const [step, setStep] = useState('landing');
            const [situation, setSituation] = useState(null);
            const [role, setRole] = useState('');
            const [currentIndex, setCurrentIndex] = useState(0);
            const [answers, setAnswers] = useState({});
            const [currentInput, setCurrentInput] = useState('');
            const [hintsUsed, setHintsUsed] = useState(0);
            const [showHint, setShowHint] = useState(false);
            const [copyStatus, setCopyStatus] = useState('æ€è€ƒãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹');

            const situations = [
                { id: 'fire', label: 'ç«ç½', icon: 'fa-fire', color: 'text-red-500', desc: 'ç…™ã®åºƒãŒã‚Šã¨ç†±ã€å»¶ç„¼ã®ææ€–ã€‚é¿é›£çµŒè·¯ã®é®æ–­ãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯ã§ã™ã€‚' },
                { id: 'earthquake', label: 'å·¨å¤§åœ°éœ‡', icon: 'fa-bolt', color: 'text-yellow-600', desc: 'æ¿€ã—ã„æºã‚Œã€ç‰©å“ã®æ•£ä¹±ã€ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³ã®åœæ­¢ã€‚è¶³å…ƒã®å±é™ºãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯ã§ã™ã€‚' },
                { id: 'flood', label: 'æµ¸æ°´ãƒ»æ°´å®³', icon: 'fa-water', color: 'text-blue-500', desc: 'å¾ã€…ã«ä¸ŠãŒã‚‹æ°´ä½ã€‚å­¤ç«‹ã®ä¸å®‰ã¨ã€åŒ»ç™‚ç¶™ç¶šã®é™ç•ŒãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯ã§ã™ã€‚' }
            ];

            const roles = [
                { id: 'center-head', label: 'ã‚»ãƒ³ã‚¿ãƒ¼é•·', description: 'å…¨ä½“çµ±æ‹¬ãƒ»å¯¾å¤–èª¿æ•´' },
                { id: 'floor-leader', label: 'ãƒ•ãƒ­ã‚¢è²¬ä»»è€…', description: 'ç¾å ´æŒ‡æ®ãƒ»æŒ‡ç¤ºå‡ºã—' },
                { id: 'chief', label: 'ä¸»ä»»', description: 'å®Ÿå‹™èª¿æ•´ãƒ»ãƒªãƒ¼ãƒ€ãƒ¼è£œåŠ©' },
                { id: 'sub-chief', label: 'å‰¯ä¸»ä»»', description: 'å‹•ç·šç¢ºä¿ãƒ»å®Ÿå‹™ã®è¦' },
                { id: 'engineer', label: 'æŠ€å£«', description: 'æ©Ÿå™¨å®‰å…¨ãƒ»MEè³‡ç”£ä¿è­·' },
                { id: 'other', label: 'ãã®ä»–', description: 'ã‚µãƒãƒ¼ãƒˆãƒ»ä¸€èˆ¬ã‚¹ã‚¿ãƒƒãƒ•' }
            ];

            const scenario = [
                { id: 'Command', title: 'Commandï¼ˆæŒ‡æ®ãƒ»çµ±åˆ¶ï¼‰', intent: 'ç¾å ´ã®æ··ä¹±ã‚’æŠ‘ãˆã€æƒ…å ±ã®æµã‚Œã¨åˆ¤æ–­ã®è²¬ä»»è€…ã‚’æ˜ç¢ºã«ã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'ç½å®³ç™ºç”Ÿç›´å¾Œã€‚å‘¨å›²ã®ã‚¹ã‚¿ãƒƒãƒ•ã‚„æ‚£è€…ãŒã‚ãªãŸã®å‹•ãã«æ³¨ç›®ã—ã€ä¸å®‰ãŒåºƒãŒã£ã¦ã„ã¾ã™ã€‚' },
                { id: 'Safety', title: 'Safetyï¼ˆå®‰å…¨ç¢ºä¿ï¼‰', intent: 'è‡ªåˆ†è‡ªèº«ã®å®‰å…¨ã€ã‚¹ã‚¿ãƒƒãƒ•ã®å®‰å…¨ã€ãã—ã¦ç¾å ´ã®å®‰å…¨ã‚’ç¢ºèªã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'ã‚ãªãŸãŒå€’ã‚Œã‚Œã°æ•‘ãˆã‚‹å‘½ã‚‚æ•‘ãˆã¾ã›ã‚“ã€‚å‘¨å›²ã«è¿«ã‚‹ç›®ã«è¦‹ãˆã‚‹å±é™ºã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚' },
                { id: 'Communication', title: 'Communicationï¼ˆæƒ…å ±ä¼é”ï¼‰', intent: 'å¿…è¦ãªæƒ…å ±ã‚’ã€å¿…è¦ãªç›¸æ‰‹ã¸ã€ç¢ºå®Ÿã‹ã¤ç°¡æ½”ã«å±Šã‘ã‚‹ãŸã‚ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'é¨’éŸ³ã‚„æ··ä¹±ã®ä¸­ã§ã€ã€Œç›¸æ‰‹ãŒã©ã†å—ã‘å–ã£ãŸã‹ã€ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚' },
                { id: 'Assessment', title: 'Assessmentï¼ˆè©•ä¾¡ï¼‰', intent: 'è¢«å®³ã®å¤§ãã•ã¨ã€ä»Šã™ãå¯¾å¿œãŒå¿…è¦ãªå¯¾è±¡ã®æ•°ã‚’æ­£ç¢ºã«æŠŠæ¡ã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'ç›®ã®å‰ã®ä¸€äººã ã‘ã§ãªãã€ãƒ•ãƒ­ã‚¢å…¨ä½“ã‚’è¦‹æ¸¡ã—ã€å…¨ä½“åƒã‚’æã„ã¦ãã ã•ã„ã€‚' },
                { id: 'Triage', title: 'Triageï¼ˆé¸åˆ¥ï¼‰', intent: 'é™ã‚‰ã‚ŒãŸè³‡æºã§æœ€å¤§ã®åŠ¹æœã‚’ä¸Šã’ã‚‹ãŸã‚ã€å¯¾å¿œã®å„ªå…ˆé †ä½ã‚’æ±ºã‚ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'å…¨å“¡ã‚’åŒæ™‚ã«ã¯åŠ©ã‘ã‚‰ã‚Œãªã„çŠ¶æ³ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ä½•ã‚’åŸºæº–ã«ã€Œé‡ã¿ã€ã‚’ã¤ã‘ã¾ã™ã‹ã€‚' },
                { id: 'Treatment', title: 'Treatmentï¼ˆå¿œæ€¥å‡¦ç½®ï¼‰', intent: 'æ¬¡ã®å ´æ‰€ã¸ç§»å‹•ã™ã‚‹ãŸã‚ã«ã€æœ€ä½é™å¿…è¦ãªåŒ»ç™‚å‡¦ç½®ã‚’è¡Œã†ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'å®Œç’§ãªæ²»ç™‚ã¯ä¸è¦ã§ã™ã€‚ã€Œå‘½ã‚’ã¤ãªããŸã‚ã€ã«å‰Šãè½ã¨ã—ãŸå‡¦ç½®ã‚’è€ƒãˆã¾ã™ã€‚' },
                { id: 'Transport', title: 'Transportï¼ˆæ¬é€ï¼‰', intent: 'ä»Šã„ã‚‹å±é™ºãªå ´æ‰€ã‹ã‚‰ã€ã‚ˆã‚Šå®‰å…¨ãªå ´æ‰€ã¸æ‚£è€…ã‚’ç§»å‹•ã•ã›ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚', context: 'ç›®çš„åœ°ã¾ã§ã®çµŒè·¯ã¨æ‰‹æ®µã€ãã®ãƒªã‚¹ã‚¯ã‚’è€ƒæ…®ã—ã¦ãã ã•ã„ã€‚' }
            ];

            const hintData = {
                'fire': {
                    'Command': { hint: ["ç¾åœ¨ã®ãƒ•ãƒ­ã‚¢è²¬ä»»è€…ã¯èª°ã‹ï¼Ÿ", "æŒ‡ç¤ºãŒé€”åˆ‡ã‚ŒãŸæ™‚ã€ã©ã“ã¾ã§åˆ¤æ–­ã—ã¦è‰¯ã„ã‹ï¼Ÿ"], point: "ç½å®³æ™‚ã¯ã€å½¹è·ã€ã‚ˆã‚Šã€æ©Ÿèƒ½ã€ãŒå„ªå…ˆã•ã‚Œã‚‹" },
                    'Safety': { hint: ["ç…™ã®é«˜ã•ã¯ï¼Ÿ", "ç©ºèª¿ã§ç…™ãŒæµã‚Œè¾¼ã‚€å¯èƒ½æ€§ã¯ï¼Ÿ"], point: "è¦‹ãˆãªã„COï¼ˆä¸€é…¸åŒ–ç‚­ç´ ï¼‰ã¯è©•ä¾¡ã•ã‚Œã«ãã„" },
                    'Communication': { hint: ["å£°ãŒé€šã‚‰ãªã„æ™‚ã€ã©ã†ä¼ãˆã‚‹ã‹ï¼Ÿ", "æ‚£è€…ã¸ã®æŒ‡ç¤ºã¯çŸ­ãé™å®šã—ã¦ã„ã‚‹ã‹ï¼Ÿ"], point: "ã€ä¼ã‚ã£ãŸã€ã‹ãŒé‡è¦" },
                    'Assessment': { hint: ["ã©ã®æ™‚ç‚¹ã§ã€å›è·¯ã‚’çŠ ç‰²ã«ã™ã‚‹ã€ã¨æ±ºã‚ã‚‹ã‹ï¼Ÿ"], point: "è¡€æ¶²æ±šæŸ“ã¯é¿é›£å‹•ç·šã‚’å¡ã" },
                    'Triage': { hint: ["ã€æ­©ã‘ã‚‹ã€æ‚£è€…ã®ãµã‚‰ã¤ãã¯ï¼Ÿ"], point: "é€ææ‚£è€…ã®æ­©è¡Œå¯èƒ½æ™‚é–“ã¯çŸ­ã„" },
                    'Treatment': { hint: ["çœç•¥ã—ã¦ã‚ˆã„ä½œæ¥­ã¨ã€çµ¶å¯¾ã«ãƒ€ãƒ¡ãªä½œæ¥­ã¯ï¼Ÿ"], point: "ç½å®³åŒ»ç™‚ã«å®Œç’§ã¯ä¸è¦ã€æ™‚é–“ï¼å®‰å…¨" },
                    'Transport': { hint: ["éšæ®µç§»å‹•ã«è€ãˆã‚‰ã‚Œã‚‹ã‹ï¼Ÿ"], point: "ç§»å‹•ä¸­ã«æ‚ªåŒ–ã™ã‚‹æ‚£è€…ãŒæœ€ã‚‚å±é™º" }
                },
                'earthquake': {
                    'Command': { hint: ["å…¨ã‚¹ã‚¿ãƒƒãƒ•ã®å®‰å¦ã‚’å³åº§ã«ç¢ºèªã§ãã‚‹ã‹ï¼Ÿ"], point: "æ··ä¹±æœŸã¯èª°ãŒæ±ºå®šæ¨©ã‚’æŒã¤ã‹æ˜ç¢ºã«ã™ã‚‹" },
                    'Safety': { hint: ["é€ææ©Ÿã®è»¢å€’ã®å±é™ºã¯ï¼Ÿ"], point: "ä¸Šã‹ã‚‰ã®è½ä¸‹ç‰©ã€æ¨ªã‹ã‚‰ã®ç§»å‹•ç‰©ã«æ³¨æ„" },
                    'Communication': { hint: ["åœé›»ã§é›»è©±ãŒä½¿ãˆãªã„å ´åˆã®æ‰‹æ®µã¯ï¼Ÿ"], point: "ã‚¢ãƒŠãƒ­ã‚°ãªæƒ…å ±ä¼é”ã‚’æƒ³å®š" },
                    'Assessment': { hint: ["ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³ï¼ˆæ°´ãƒ»é›»æ°—ï¼‰ã®æ®‹é‡ã¯ï¼Ÿ"], point: "ã‚¤ãƒ³ãƒ•ãƒ©åœæ­¢æ™‚ã¯æ²»ç™‚ç¶™ç¶šãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯" },
                    'Triage': { hint: ["é‡ç—‡è€…ã¨ç‹¬æ­©å¯èƒ½è€…ã®ä»•åˆ†ã‘ã¯ï¼Ÿ"], point: "ç²¾ç¥çš„ãªå‹•æºã‚‚ãƒˆãƒªã‚¢ãƒ¼ã‚¸ã®å¯¾è±¡" },
                    'Treatment': { hint: ["æ‰‹å‹•ã§ã®è¿”è¡€ã¯å¯èƒ½ã‹ï¼Ÿ"], point: "é›»æ°—ãŒãªã„å‰æã§ã®æœ€å°é™ã®å‡¦ç½®ã‚’" },
                    'Transport': { hint: ["ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼åœæ­¢æ™‚ã®äººå“¡ã¯ï¼Ÿ"], point: "ä½™éœ‡ã«ã‚ˆã‚‹äºŒæ¬¡ç½å®³ã‚’è€ƒæ…®ã—ãŸçµŒè·¯é¸å®š" }
                },
                'flood': {
                    'Command': { hint: ["å‚ç›´é¿é›£ã®åˆ¤æ–­æ™‚æœŸã¯ï¼Ÿ"], point: "æœ€æ‚ªã®ã‚·ãƒŠãƒªã‚ªã‚’å…ˆèª­ã¿ã—ã¦å‹•ã" },
                    'Safety': { hint: ["æµ¸æ°´ã«ã‚ˆã‚‹æ„Ÿé›»ãƒªã‚¹ã‚¯ã¯ï¼Ÿ"], point: "æµ¸æ°´ã—ãŸæ°´ã¯æ±šæŸ“ã•ã‚Œã¦ã„ã‚‹ã¨è€ƒãˆã‚‹" },
                    'Communication': { hint: ["æ•‘åŠ©è¦è«‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ï¼Ÿ"], point: "å­¤ç«‹ã‚’å‰æã¨ã—ãŸé€šä¿¡æ‰‹æ®µã®ç¢ºä¿" },
                    'Assessment': { hint: ["2éšä»¥ä¸Šã®åå®¹é™ç•Œäººæ•°ã¯ï¼Ÿ"], point: "æ™‚é–“çµŒéã¨ã¨ã‚‚ã«æ‚ªåŒ–ã™ã‚‹çŠ¶æ³ã‚’äºˆæ¸¬" },
                    'Triage': { hint: ["å…ˆã«ä¸Šéšã¸ç§»ã™ã¹ãæ‚£è€…ã®æ¡ä»¶ã¯ï¼Ÿ"], point: "ä½“æ¸©ä½ä¸‹ï¼ˆä½ä½“æ¸©ç—‡ï¼‰ã®ãƒªã‚¹ã‚¯ã‚‚è€ƒæ…®" },
                    'Treatment': { hint: ["åŒ»è–¬å“ã®ç§»å‹•ã¯æ¸ˆã‚“ã§ã„ã‚‹ã‹ï¼Ÿ"], point: "é™ã‚‰ã‚ŒãŸç‰©è³‡ã§ã®å»¶å‘½ã‚’è€ƒãˆã‚‹" },
                    'Transport': { hint: ["æš—ã„ä¸­ã§ã®å‚ç›´é¿é›£ã®ãƒªã‚¹ã‚¯ã¯ï¼Ÿ"], point: "æ°´ã®æ·±ã•ãŒè†ã‚’è¶…ãˆã‚‹ã¨ç§»å‹•ã¯å›°é›£" }
                }
            };

            const handleNext = () => {
                setAnswers({ ...answers, [scenario[currentIndex].id]: { text: currentInput, hintUsed: showHint } });
                setCurrentInput('');
                setShowHint(false);
                if (currentIndex < scenario.length - 1) {
                    setCurrentIndex(currentIndex + 1);
                } else {
                    setStep('result');
                }
            };

            const copyToClipboard = () => {
                const today = new Date().toLocaleDateString('ja-JP');
                let log = `ã€é€æå®¤ç½å®³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»æ€è€ƒãƒ­ã‚°ã€‘ å®Ÿæ–½æ—¥:${today}\n`;
                log += `çŠ¶æ³ï¼š${situation?.label} / å½¹å‰²ï¼š${role}\n`;
                log += `----------------------------------\n`;
                scenario.forEach(s => {
                    const ans = answers[s.id];
                    log += `â–  ${s.title}\næ€è€ƒï¼š${ans?.text || '(æœªå…¥åŠ›)'}${ans?.hintUsed ? ' ï¼ˆâ€»ãƒ’ãƒ³ãƒˆæ´»ç”¨ï¼‰' : ''}\n\n`;
                });
                log += `----------------------------------\n`;
                log += `ã€AIã¸ã®ä¾é ¼ã€‘ã‚ãªãŸã¯æ€è€ƒã‚’æ˜ ã™é¡ã¨ã—ã¦ã€ã“ã®ãƒ­ã‚°ã‹ã‚‰ç§ã®è¦–ç‚¹ã‚„æ°—ã¥ãã‚’è¨€èªåŒ–ã—ã€å¯¾è©±ã—ã¦ãã ã•ã„ã€‚ç‚¹æ•°åŒ–ã¯ä¸è¦ã§ã™ã€‚\n`;

                navigator.clipboard.writeText(log).then(() => {
                    setCopyStatus('âœ… ã‚³ãƒ”ãƒ¼æˆåŠŸï¼AIã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„');
                    setTimeout(() => setCopyStatus('æ€è€ƒãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹'), 3000);
                });
            };

            // ãƒ“ãƒ¥ãƒ¼: ç€é™¸ãƒšãƒ¼ã‚¸
            if (step === 'landing') return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-slate-900 text-white text-center">
                    <div className="mb-8 w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center shadow-lg shadow-blue-500/50">
                        <i className="fa-solid fa-shield-halved text-4xl"></i>
                    </div>
                    <h1 className="text-3xl font-bold mb-4">é€æå®¤é˜²ç½<br/><span className="text-blue-500">CSCATTT</span> è¨“ç·´</h1>
                    <p className="text-slate-400 mb-8 text-sm">æ€è€ƒã‚’æ•´ç†ã—ã€AIã¨å¯¾è©±ã™ã‚‹ãŸã‚ã®è¨“ç·´ãƒ„ãƒ¼ãƒ«</p>
                    <button onClick={() => setStep('select-situation')} className="w-full max-w-xs py-4 bg-blue-600 hover:bg-blue-500 rounded-xl font-bold text-lg transition-transform active:scale-95">è¨“ç·´ã‚’å§‹ã‚ã‚‹</button>
                </div>
            );

            // ãƒ“ãƒ¥ãƒ¼: çŠ¶æ³é¸æŠ
            if (step === 'select-situation') return (
                <div className="p-4 max-w-md mx-auto min-h-screen">
                    <h2 className="text-xl font-bold mb-6 text-center">ç½å®³çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„</h2>
                    <div className="space-y-4">
                        {situations.map(s => (
                            <button key={s.id} onClick={() => setSituation(s)} className={`w-full p-4 border-2 rounded-xl text-left transition-all ${situation?.id === s.id ? 'border-blue-500 bg-blue-50' : 'border-slate-200 bg-white'}`}>
                                <div className="flex items-center gap-3">
                                    <i className={`fa-solid ${s.icon} ${s.color} text-xl`}></i>
                                    <span className="font-bold">{s.label}</span>
                                </div>
                                <p className="text-xs text-slate-500 mt-2">{s.desc}</p>
                            </button>
                        ))}
                    </div>
                    <button disabled={!situation} onClick={() => setStep('select-role')} className="w-full mt-8 py-4 bg-blue-600 text-white rounded-xl font-bold disabled:bg-slate-300">æ¬¡ã¸ï¼šå½¹å‰²ã‚’é¸ã¶</button>
                </div>
            );

            // ãƒ“ãƒ¥ãƒ¼: å½¹å‰²é¸æŠ
            if (step === 'select-role') return (
                <div className="p-4 max-w-md mx-auto min-h-screen">
                    <h2 className="text-xl font-bold mb-6 text-center">ã‚ãªãŸã®å½¹å‰²ã¯ï¼Ÿ</h2>
                    <div className="grid grid-cols-1 gap-3">
                        {roles.map(r => (
                            <button key={r.id} onClick={() => { setRole(r.label); setStep('sim'); }} className="p-4 border-2 border-slate-200 bg-white rounded-xl text-left hover:border-blue-500 hover:bg-blue-50 transition-all">
                                <div className="font-bold text-slate-800">{r.label}</div>
                                <div className="text-xs text-slate-500">{r.description}</div>
                            </button>
                        ))}
                    </div>
                </div>
            );

            // ãƒ“ãƒ¥ãƒ¼: ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            if (step === 'sim') {
                const s = scenario[currentIndex];
                const h = hintData[situation.id]?.[s.id];
                return (
                    <div className="p-4 max-w-md mx-auto min-h-screen flex flex-col">
                        <div className="flex justify-between text-[10px] font-bold text-slate-400 mb-2 uppercase">
                            <span>Step {currentIndex + 1} / 7</span>
                            <span>{situation.label} / {role}</span>
                        </div>
                        <div className="bg-white rounded-2xl shadow-md border border-slate-200 overflow-hidden flex-grow flex flex-col">
                            <div className="bg-slate-800 p-5 text-white">
                                <h3 className="text-lg font-bold">{s.title}</h3>
                                <p className="text-[11px] text-slate-300 mt-1">{s.intent}</p>
                            </div>
                            <div className="p-5 flex-grow space-y-4">
                                <p className="text-sm italic text-slate-600 bg-slate-50 p-3 rounded-lg border-l-4 border-blue-500">"{s.context}"</p>
                                
                                {showHint ? (
                                    <div className="bg-amber-50 border border-amber-200 rounded-xl p-4 text-xs">
                                        <div className="font-bold text-amber-800 mb-2 underline">ãƒ’ãƒ³ãƒˆè¦–ç‚¹:</div>
                                        <ul className="list-disc list-inside space-y-1 mb-3">
                                            {h.hint.map((txt, i) => <li key={i}>{txt}</li>)}
                                        </ul>
                                        <div className="bg-white p-2 rounded text-[10px]"><span className="font-bold">ğŸ’¡ POINT:</span> {h.point}</div>
                                    </div>
                                ) : (
                                    <button 
                                        disabled={hintsUsed >= 2} 
                                        onClick={() => {setShowHint(true); setHintsUsed(hintsUsed + 1)}} 
                                        className="w-full py-2 text-amber-700 bg-amber-50 border border-amber-200 rounded-lg text-xs font-bold disabled:opacity-50"
                                    >
                                        <i className="fa-regular fa-lightbulb mr-1"></i> ãƒ’ãƒ³ãƒˆã‚’ä½¿ã† (æ®‹ã‚Š{Math.max(0, 2 - hintsUsed)}å›)
                                    </button>
                                )}

                                <textarea 
                                    className="w-full p-4 border-2 border-slate-100 rounded-xl focus:border-blue-500 outline-none h-40 text-sm shadow-inner" 
                                    placeholder={`${role}ã¨ã—ã¦è€ƒãˆã‚‹ã“ã¨ã¯...`}
                                    value={currentInput}
                                    onChange={(e) => setCurrentInput(e.target.value)}
                                />
                                <button onClick={handleNext} className="w-full py-4 bg-blue-600 text-white rounded-xl font-bold shadow-lg shadow-blue-200">
                                    {currentIndex === 6 ? 'å®Œäº†ã—ã¦çµæœã¸' : 'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸'}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            // ãƒ“ãƒ¥ãƒ¼: çµæœè¡¨ç¤º
            if (step === 'result') return (
                <div className="p-4 max-w-md mx-auto min-h-screen pb-10">
                    <div className="bg-white rounded-2xl shadow-xl p-6 text-center border-t-8 border-blue-600 mb-6">
                        <i className="fa-solid fa-circle-check text-5xl text-blue-600 mb-4"></i>
                        <h2 className="text-xl font-bold">è¨“ç·´ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</h2>
                        <p className="text-xs text-slate-500 mt-2">ã‚ãªãŸã®æ€è€ƒãƒ­ã‚°ãŒå®Œæˆã—ã¾ã—ãŸã€‚ã“ã‚Œã‚’AIã«è²¼ã‚Šä»˜ã‘ã¦æŒ¯ã‚Šè¿”ã‚Šã‚’è¡Œã„ã¾ã—ã‚‡ã†ã€‚</p>
                    </div>

                    <div className="bg-white rounded-2xl shadow-md p-5 border border-slate-200 mb-6">
                        <h3 className="font-bold text-sm border-b pb-2 mb-4">æ€è€ƒãƒ­ã‚°ã®å†…å®¹</h3>
                        <div className="space-y-4 max-h-60 overflow-y-auto text-xs text-slate-600 bg-slate-50 p-3 rounded">
                            {scenario.map(s => (
                                <div key={s.id}><b>{s.title}:</b> {answers[s.id]?.text || 'æœªå…¥åŠ›'}</div>
                            ))}
                        </div>
                    </div>

                    <button 
                        onClick={copyToClipboard} 
                        className={`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all ${copyStatus.includes('âœ…') ? 'bg-green-600' : 'bg-blue-600'}`}
                    >
                        <i className={`fa-solid ${copyStatus.includes('âœ…') ? 'fa-check' : 'fa-copy'} mr-2`}></i>
                        {copyStatus}
                    </button>
                    
                    <p className="text-[10px] text-center text-slate-400 mt-4 px-4 leading-relaxed">
                        ã‚³ãƒ”ãƒ¼ã—ãŸå†…å®¹ã‚’ã€ChatGPTã‚„Geminiãªã©ã®AIã‚¢ãƒ—ãƒªã‚’ç«‹ã¡ä¸Šã’ã¦ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¬„ã«ãã®ã¾ã¾ãƒšãƒ¼ã‚¹ãƒˆï¼ˆè²¼ã‚Šä»˜ã‘ï¼‰ã—ã¦é€ä¿¡ã—ã¦ãã ã•ã„ã€‚
                    </p>

                    <button onClick={() => location.reload()} className="w-full mt-10 text-slate-400 text-xs underline">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

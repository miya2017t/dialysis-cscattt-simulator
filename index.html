<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é€æå®¤é˜²ç½CSCATTTè¨“ç·´</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; -webkit-tap-highlight-color: transparent; }
        .animate-fadeIn { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 select-none">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const App = () => {
            const [step, setStep] = useState('landing');
            const [situation, setSituation] = useState(null);
            const [role, setRole] = useState('');
            const [currentIndex, setCurrentIndex] = useState(0);
            const [answers, setAnswers] = useState({});
            const [currentInput, setCurrentInput] = useState('');
            const [hintsUsed, setHintsUsed] = useState(0);
            const [showHint, setShowHint] = useState(false);
            const [copyStatus, setCopyStatus] = useState('æ€è€ƒãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹');

            const situations = [
                { id: 'fire', label: 'ç«ç½', icon: 'fa-fire', color: 'text-red-500', desc: 'ç…™ã®åºƒãŒã‚Šã¨ç†±ã€å»¶ç„¼ã®ææ€–ã€‚é¿é›£çµŒè·¯ã®é®æ–­ãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯ã§ã™ã€‚' },
                { id: 'earthquake', label: 'å·¨å¤§åœ°éœ‡', icon: 'fa-bolt', color: 'text-yellow-600', desc: 'æ¿€ã—ã„æºã‚Œã€ç‰©å“ã®æ•£ä¹±ã€ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³ã®åœæ­¢ã€‚è¶³å…ƒã®å±é™ºãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯ã§ã™ã€‚' },
                { id: 'flood', label: 'æµ¸æ°´ãƒ»æ°´å®³', icon: 'fa-water', color: 'text-blue-500', desc: 'å¾ã€…ã«ä¸ŠãŒã‚‹æ°´ä½ã€‚å­¤ç«‹ã®ä¸å®‰ã¨ã€åŒ»ç™‚ç¶™ç¶šã®é™ç•ŒãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯ã§ã™ã€‚' }
            ];

            const roles = [
                { id: 'center-head', label: 'ã‚»ãƒ³ã‚¿ãƒ¼é•·', description: 'å…¨ä½“çµ±æ‹¬ãƒ»å¯¾å¤–èª¿æ•´' },
                { id: 'floor-leader', label: 'ãƒ•ãƒ­ã‚¢è²¬ä»»è€…', description: 'ç¾å ´æŒ‡æ®ãƒ»æŒ‡ç¤ºå‡ºã—' },
                { id: 'chief', label: 'ä¸»ä»»', description: 'å®Ÿå‹™èª¿æ•´ãƒ»ãƒªãƒ¼ãƒ€ãƒ¼è£œåŠ©' },
                { id: 'sub-chief', label: 'å‰¯ä¸»ä»»', description: 'å‹•ç·šç¢ºä¿ãƒ»å®Ÿå‹™ã®è¦' },
                { id: 'engineer', label: 'æŠ€å£«', description: 'æ©Ÿå™¨å®‰å…¨ãƒ»MEè³‡ç”£ä¿è­·' },
                { id: 'other', label: 'ãã®ä»–', description: 'ã‚µãƒãƒ¼ãƒˆãƒ»ä¸€èˆ¬ã‚¹ã‚¿ãƒƒãƒ•' }
            ];

            const scenario = [
                { id: 'Command', title: 'Commandï¼ˆæŒ‡æ®ãƒ»çµ±åˆ¶ï¼‰', icon: 'fa-users', intent: 'åˆ¤æ–­ã®è²¬ä»»è€…ã‚’æ˜ç¢ºã«ã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã€‚', context: 'ç½å®³ç™ºç”Ÿç›´å¾Œã€‚å‘¨å›²ãŒã‚ãªãŸã®å‹•ãã«æ³¨ç›®ã—ã€ä¸å®‰ãŒåºƒãŒã£ã¦ã„ã¾ã™ã€‚' },
                { id: 'Safety', title: 'Safetyï¼ˆå®‰å…¨ç¢ºä¿ï¼‰', icon: 'fa-shield-halved', intent: 'è‡ªåˆ†ã¨å‘¨å›²ã®å®‰å…¨ã‚’ç¢ºèªã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã€‚', context: 'ã‚ãªãŸãŒå€’ã‚Œã‚Œã°æ•‘ãˆã‚‹å‘½ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚è¿«ã‚Šãã‚‹å±é™ºã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚' },
                { id: 'Communication', title: 'Communicationï¼ˆä¼é”ï¼‰', icon: 'fa-comments', intent: 'å¿…è¦ãªæƒ…å ±ã‚’ã€ç°¡æ½”ã«å±Šã‘ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã€‚', context: 'é¨’éŸ³ã®ä¸­ã§ã€ã€Œä¼ã‚ã£ãŸã‹ã€ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚' },
                { id: 'Assessment', title: 'Assessmentï¼ˆè©•ä¾¡ï¼‰', icon: 'fa-chart-line', intent: 'è¢«å®³ã¨å¯¾å¿œå„ªå…ˆåº¦ã‚’æŠŠæ¡ã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã€‚', context: 'ç›®ã®å‰ã®ä¸€äººã ã‘ã§ãªãã€ãƒ•ãƒ­ã‚¢å…¨ä½“ã‚’è¦‹æ¸¡ã—ã¦ãã ã•ã„ã€‚' },
                { id: 'Triage', title: 'Triageï¼ˆé¸åˆ¥ï¼‰', icon: 'fa-triangle-exclamation', intent: 'å¯¾å¿œã®å„ªå…ˆé †ä½ã‚’æ±ºã‚ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã€‚', context: 'ä½•ã‚’åŸºæº–ã«ã€Œé‡ã¿ã€ã‚’ã¤ã‘ã¾ã™ã‹ã€‚' },
                { id: 'Treatment', title: 'Treatmentï¼ˆå‡¦ç½®ï¼‰', icon: 'fa-suitcase-medical', intent: 'ç§»å‹•ã®ãŸã‚ã®æœ€ä½é™ã®å‡¦ç½®ã‚’è¡Œã†ã‚¹ãƒ†ãƒƒãƒ—ã€‚', context: 'å‘½ã‚’ã¤ãªããŸã‚ã«ã€Œå‰Šãè½ã¨ã—ãŸã€å‡¦ç½®ã‚’è€ƒãˆã¾ã™ã€‚' },
                { id: 'Transport', title: 'Transportï¼ˆæ¬é€ï¼‰', icon: 'fa-truck-medical', intent: 'å®‰å…¨ãªå ´æ‰€ã¸ç§»å‹•ã•ã›ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ã€‚', context: 'ç›®çš„åœ°ã¾ã§ã®çµŒè·¯ã¨æ‰‹æ®µã€ãã®ãƒªã‚¹ã‚¯ã‚’è€ƒæ…®ã—ã¦ãã ã•ã„ã€‚' }
            ];

            const hintData = {
                'fire': {
                    'Command': { hint: ["ç¾åœ¨ã®ãƒ•ãƒ­ã‚¢è²¬ä»»è€…ã¯èª°ã‹ï¼Ÿ", "æŒ‡ç¤ºãŒé€”åˆ‡ã‚ŒãŸæ™‚ã€ã©ã“ã¾ã§åˆ¤æ–­ã—ã¦è‰¯ã„ã‹ï¼Ÿ"], point: "ç½å®³æ™‚ã¯ã€å½¹è·ã€ã‚ˆã‚Šã€æ©Ÿèƒ½ã€ãŒå„ªå…ˆã•ã‚Œã‚‹" },
                    'Safety': { hint: ["ç…™ã®é«˜ã•ã¯ï¼Ÿï¼ˆå¤©äº•ã‹ã€æ‚£è€…ã®é¡”ã‹ï¼‰", "ç©ºèª¿ã§ç…™ãŒæµã‚Œè¾¼ã‚€å¯èƒ½æ€§ã¯ï¼Ÿ"], point: "è¦‹ãˆãªã„COï¼ˆä¸€é…¸åŒ–ç‚­ç´ ï¼‰ã¯è©•ä¾¡ã•ã‚Œã«ãã„" },
                    'Communication': { hint: ["é¨’éŸ³ã§å£°ãŒé€šã‚‰ãªã„æ™‚ã€ã©ã†ä¼ãˆã‚‹ã‹ï¼Ÿ", "æ‚£è€…ã¸ã®æŒ‡ç¤ºã¯çŸ­ãé™å®šã—ã¦ã„ã‚‹ã‹ï¼Ÿ"], point: "ã€ä¼ãˆãŸã€ã§ã¯ãªãã€ä¼ã‚ã£ãŸã€ã‹ãŒé‡è¦" },
                    'Assessment': { hint: ["ã©ã®æ™‚ç‚¹ã§ã€å›è·¯ã‚’çŠ ç‰²ã«ã™ã‚‹ã€ã¨æ±ºã‚ã‚‹ã‹ï¼Ÿ", "å›è·¯ãƒˆãƒ©ãƒ–ãƒ«ã«ã‚ˆã‚‹äºŒæ¬¡ç½å®³ã¯ï¼Ÿ"], point: "è¡€æ¶²æ±šæŸ“ã¯é¿é›£å‹•ç·šã‚’å¡ã" },
                    'Triage': { hint: ["ã€æ­©ã‘ã‚‹ã€æ‚£è€…ã®ä½è¡€åœ§ã‚„ãµã‚‰ã¤ãã¯ï¼Ÿ", "èª°ã‚’ä»Šã™ãã€èª°ã‚’æ”¯æ´ä»˜ãã§å‹•ã‹ã™ã‹ï¼Ÿ"], point: "é€ææ‚£è€…ã®æ­©è¡Œå¯èƒ½æ™‚é–“ã¯çŸ­ã„" },
                    'Treatment': { hint: ["çœç•¥ã—ã¦ã‚ˆã„ä½œæ¥­ã¨ã€çµ¶å¯¾ã«ãƒ€ãƒ¡ãªä½œæ¥­ã¯ï¼Ÿ", "å›è·¯ã‚¯ãƒ©ãƒ³ãƒ—ãƒ»æ­¢è¡€ã®å„ªå…ˆé †ä½ã¯ï¼Ÿ"], point: "ç½å®³åŒ»ç™‚ã«å®Œç’§ã¯ä¸è¦ã€æ™‚é–“ï¼å®‰å…¨" },
                    'Transport': { hint: ["éšæ®µç§»å‹•ã«è€ãˆã‚‰ã‚Œã‚‹ã‹ï¼Ÿ", "é€”ä¸­ã§å‹•ã‘ãªããªã£ãŸæ™‚ã®ä»£æ›¿ãƒ«ãƒ¼ãƒˆã¯ï¼Ÿ"], point: "ç§»å‹•ä¸­ã«æ‚ªåŒ–ã™ã‚‹æ‚£è€…ãŒæœ€ã‚‚å±é™º" }
                },
                'earthquake': {
                    'Command': { hint: ["å…¨ã‚¹ã‚¿ãƒƒãƒ•ã®å®‰å¦ã‚’å³åº§ã«ç¢ºèªã§ãã‚‹ã‹ï¼Ÿ", "ä½™éœ‡ãŒç¶šãä¸­ã§ã®æŒ‡æ®ç³»çµ±ã¯ã©ã†ãªã‚‹ï¼Ÿ"], point: "æ··ä¹±æœŸã¯èª°ãŒæ±ºå®šæ¨©ã‚’æŒã¤ã‹æ˜ç¢ºã«ã™ã‚‹" },
                    'Safety': { hint: ["ã‚¬ãƒ©ã‚¹ã€æ£šã€é€ææ©Ÿã®è»¢å€’ã®å±é™ºã¯ï¼Ÿ", "é¿é›£çµŒè·¯ã«éšœå®³ç‰©ã¯è½ã¡ã¦ã„ãªã„ã‹ï¼Ÿ"], point: "ä¸Šã‹ã‚‰ã®è½ä¸‹ç‰©ã€æ¨ªã‹ã‚‰ã®ç§»å‹•ç‰©ã«æ³¨æ„" },
                    'Communication': { hint: ["åœé›»ã§é›»è©±ãŒä½¿ãˆãªã„å ´åˆã®é€£çµ¡æ‰‹æ®µã¯ï¼Ÿ", "å¤–éƒ¨ï¼ˆæœ¬éƒ¨ã‚„ä»–æ–½è¨­ï¼‰ã¨ã®é€£æºæ–¹æ³•ã¯ï¼Ÿ"], point: "ã‚¢ãƒŠãƒ­ã‚°ãªæƒ…å ±ä¼é”ï¼ˆãƒ¡ã‚¬ãƒ›ãƒ³ã€ç´™ï¼‰ã‚’æƒ³å®š" },
                    'Assessment': { hint: ["æ©Ÿå™¨ã®ç ´æçŠ¶æ³ã¨ã€é€æç¶™ç¶šã®å¯å¦ã¯ï¼Ÿ", "ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³ï¼ˆæ°´ãƒ»é›»æ°—ï¼‰ã®æ®‹é‡ã¯ï¼Ÿ"], point: "ã‚¤ãƒ³ãƒ•ãƒ©åœæ­¢æ™‚ã¯æ²»ç™‚ç¶™ç¶šãŒæœ€å¤§ã®ãƒªã‚¹ã‚¯" },
                    'Triage': { hint: ["é‡ç—‡è€…ã¨ã€ç‹¬æ­©å¯èƒ½è€…ã®ä»•åˆ†ã‘ã¯ï¼Ÿ", "ãƒ‘ãƒ‹ãƒƒã‚¯çŠ¶æ…‹ã®æ‚£è€…ã¸ã®å¯¾å¿œã¯ï¼Ÿ"], point: "ç²¾ç¥çš„ãªå‹•æºã‚‚ãƒˆãƒªã‚¢ãƒ¼ã‚¸ã®å¯¾è±¡" },
                    'Treatment': { hint: ["åœé›»æ™‚ã®ç·Šæ€¥é›¢è„±æ‰‹é †ã¯å¾¹åº•ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ", "æ‰‹å‹•ã§ã®è¿”è¡€ã¯å¯èƒ½ã‹ï¼Ÿ"], point: "é›»æ°—ãŒãªã„å‰æã§ã®æœ€å°é™ã®å‡¦ç½®ã‚’" },
                    'Transport': { hint: ["ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼åœæ­¢æ™‚ã®éšæ®µæ¬é€ã®äººå“¡ã¯ï¼Ÿ", "å±‹å¤–ã®å®‰å…¨åœ°å¸¯ã¯ç¢ºä¿ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ"], point: "ä½™éœ‡ã«ã‚ˆã‚‹äºŒæ¬¡ç½å®³ã‚’è€ƒæ…®ã—ãŸçµŒè·¯é¸å®š" }
                },
                'flood': {
                    'Command': { hint: ["å‚ç›´é¿é›£ã‹ã€åºƒåŸŸæ¬é€ã‹ã®åˆ¤æ–­æ™‚æœŸã¯ï¼Ÿ", "1éšãŒæ­»å®ˆã§ããªã„å ´åˆã®æŒ‡æ®æ‰€ç§»å‹•ã¯ï¼Ÿ"], point: "æœ€æ‚ªã®ã‚·ãƒŠãƒªã‚ªã‚’å…ˆèª­ã¿ã—ã¦å‹•ã" },
                    'Safety': { hint: ["é›»æ°—è¨­å‚™ã¸ã®æµ¸æ°´ã«ã‚ˆã‚‹æ„Ÿé›»ãƒªã‚¹ã‚¯ã¯ï¼Ÿ", "å­¤ç«‹ã—ãŸå ´åˆã®å‚™è“„ï¼ˆé£Ÿæ–™ãƒ»æ°´ï¼‰ã®å ´æ‰€ã¯ï¼Ÿ"], point: "æµ¸æ°´ã—ãŸæ°´ã¯æ±šæŸ“ã•ã‚Œã¦ã„ã‚‹ã¨è€ƒãˆã‚‹" },
                    'Communication': { hint: ["æ•‘åŠ©è¦è«‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯æ˜ç¢ºã‹ï¼Ÿ", "æ‚£è€…å®¶æ—ã¸ã®é€£çµ¡ã¯ã©ã†ã™ã‚‹ã‹ï¼Ÿ"], point: "å­¤ç«‹ã‚’å‰æã¨ã—ãŸé€šä¿¡æ‰‹æ®µã®ç¢ºä¿" },
                    'Assessment': { hint: ["æµ¸æ°´ã‚¹ãƒ”ãƒ¼ãƒ‰ã®æŠŠæ¡ãŒã§ãã¦ã„ã‚‹ã‹ï¼Ÿ", "2éšä»¥ä¸Šã®ãƒ•ãƒ­ã‚¢ã«åå®¹ã§ãã‚‹é™ç•Œäººæ•°ã¯ï¼Ÿ"], point: "æ™‚é–“çµŒéã¨ã¨ã‚‚ã«æ‚ªåŒ–ã™ã‚‹çŠ¶æ³ã‚’äºˆæ¸¬" },
                    'Triage': { hint: ["å…ˆã«ä¸Šéšã¸ç§»ã™ã¹ãæ‚£è€…ã®æ¡ä»¶ã¯ï¼Ÿ", "ç§»å‹•æ‰‹æ®µï¼ˆãƒœãƒ¼ãƒˆç­‰ï¼‰ã®å„ªå…ˆé †ä½ã¯ï¼Ÿ"], point: "ä½“æ¸©ä½ä¸‹ï¼ˆä½ä½“æ¸©ç—‡ï¼‰ã®ãƒªã‚¹ã‚¯ã‚‚è€ƒæ…®" },
                    'Treatment': { hint: ["è¡›ç”ŸçŠ¶æ…‹ãŒæ‚ªåŒ–ã™ã‚‹ä¸­ã§ã®æ„ŸæŸ“é˜²æ­¢ã¯ï¼Ÿ", "åŒ»è–¬å“ã®ç§»å‹•ã¯æ¸ˆã‚“ã§ã„ã‚‹ã‹ï¼Ÿ"], point: "é™ã‚‰ã‚ŒãŸç‰©è³‡ã§ã®å»¶å‘½ã‚’è€ƒãˆã‚‹" },
                    'Transport': { hint: ["æš—ã„ä¸­ã§ã®å‚ç›´é¿é›£ã®ãƒªã‚¹ã‚¯ã¯ï¼Ÿ", "æ¬é€çµŒè·¯ã«æ°´ãŒæºœã¾ã£ã¦ã„ãªã„ã‹ï¼Ÿ"], point: "æ°´ã®æ·±ã•ãŒè†ã‚’è¶…ãˆã‚‹ã¨ç§»å‹•ã¯å›°é›£" }
                }
            };

            const handleNext = () => {
                setAnswers({ ...answers, [scenario[currentIndex].id]: { text: currentInput, hintUsed: showHint } });
                setCurrentInput('');
                setShowHint(false);
                if (currentIndex < scenario.length - 1) {
                    setCurrentIndex(currentIndex + 1);
                } else {
                    setStep('result');
                }
            };

            const copyToClipboard = () => {
                const today = new Date().toLocaleDateString('ja-JP');
                let log = `ã€é€æå®¤ç½å®³è¨“ç·´ãƒ­ã‚°ã€‘ å®Ÿæ–½æ—¥:${today}\n`;
                log += `çŠ¶æ³ï¼š${situation?.label} / å½¹å‰²ï¼š${role}\n`;
                log += `----------------------------------\n`;
                scenario.forEach(s => {
                    const ans = answers[s.id];
                    log += `â–  ${s.title}\næ€è€ƒï¼š${ans?.text || '(æœªå…¥åŠ›)'}${ans?.hintUsed ? ' ï¼ˆâ€»ãƒ’ãƒ³ãƒˆæ´»ç”¨ï¼‰' : ''}\n\n`;
                });
                log += `----------------------------------\nAIã¸ã®ä¾é ¼ï¼šã“ã®ãƒ­ã‚°ã‹ã‚‰ç§ã®è¦–ç‚¹ã‚„æ°—ã¥ãã‚’è¨€èªåŒ–ã—ã€å¯¾è©±ã—ã¦ãã ã•ã„ã€‚`;

                navigator.clipboard.writeText(log).then(() => {
                    setCopyStatus('âœ… ã‚³ãƒ”ãƒ¼æˆåŠŸï¼AIã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„');
                    setTimeout(() => setCopyStatus('æ€è€ƒãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹'), 3000);
                });
            };

            // ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢
            if (step === 'landing') return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 text-center">
                    <div className="w-24 h-24 bg-blue-600 rounded-3xl flex items-center justify-center shadow-2xl mb-8">
                        <i className="fa-solid fa-shield-halved text-4xl text-white"></i>
                    </div>
                    <h1 className="text-3xl font-black mb-4">é€æå®¤é˜²ç½<br /><span className="text-blue-500">CSCATTT</span> è¨“ç·´</h1>
                    <p className="text-slate-400 mb-10">æ€è€ƒã‚’æ•´ç†ã—ã€AIã¨å¯¾è©±ã™ã‚‹ã€‚æ–°ã—ã„å½¢ã®é˜²ç½ç ”ä¿®ãƒ„ãƒ¼ãƒ«ã€‚</p>
                    <button onClick={() => setStep('situation-select')} className="w-full max-w-sm py-5 bg-blue-600 rounded-2xl font-bold text-lg shadow-lg active:scale-95 transition-transform">è¨“ç·´ã‚’å§‹ã‚ã‚‹</button>
                </div>
            );

            // çŠ¶æ³é¸æŠç”»é¢
            if (step === 'situation-select') return (
                <div className="min-h-screen bg-slate-50 text-slate-900 p-4 pt-10">
                    <div className="max-w-xl mx-auto">
                        <h2 className="text-2xl font-bold text-center mb-2">ç½å®³çŠ¶æ³ã®é¸æŠ</h2>
                        <p className="text-slate-500 text-center text-sm mb-8">è¨“ç·´ã—ãŸã„ã‚·ãƒŠãƒªã‚ªã‚’ã‚¿ãƒƒãƒ—ã—ã¦ãã ã•ã„</p>
                        <div className="space-y-4">
                            {situations.map(s => (
                                <button key={s.id} onClick={() => setSituation(s)} className={`w-full p-5 border-2 rounded-xl flex items-center gap-4 transition-all ${situation?.id === s.id ? 'border-blue-500 bg-blue-100 ring-4 ring-blue-50' : 'border-white bg-white shadow-sm hover:border-slate-200'}`}>
                                    <div className="pointer-events-none flex items-center gap-4 w-full">
                                        <div className={`p-3 rounded-lg ${situation?.id === s.id ? 'bg-blue-600 text-white' : 'bg-slate-100 text-slate-400'}`}>
                                            <i className={`fa-solid ${s.icon} text-xl`}></i>
                                        </div>
                                        <div className="text-left">
                                            <div className="font-bold text-slate-800">{s.label}</div>
                                            <div className="text-[10px] text-slate-500 mt-1 leading-relaxed">{s.desc}</div>
                                        </div>
                                    </div>
                                </button>
                            ))}
                            <button onClick={() => {const r = situations[Math.floor(Math.random()*situations.length)]; setSituation(r)}} className="w-full p-4 border-2 border-dashed border-slate-300 rounded-xl text-slate-500 font-bold hover:bg-slate-100 transition-all flex items-center justify-center gap-2">
                                <i className="fa-solid fa-dice pointer-events-none"></i> <span className="pointer-events-none">ãƒ©ãƒ³ãƒ€ãƒ ã«æ±ºå®šã™ã‚‹</span>
                            </button>
                        </div>
                        <button disabled={!situation} onClick={() => setStep('role-select')} className={`w-full mt-10 py-5 rounded-2xl font-bold text-lg shadow-xl transition-all ${situation ? 'bg-blue-600 text-white' : 'bg-slate-300 text-slate-500'}`}>
                            {situation ? `${situation.label}ã§æ±ºå®šï¼šæ¬¡ã¸` : 'çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„'}
                        </button>
                    </div>
                </div>
            );

            // å½¹å‰²é¸æŠç”»é¢
            if (step === 'role-select') return (
                <div className="min-h-screen bg-slate-50 text-slate-900 p-4 pt-10">
                    <div className="max-w-xl mx-auto">
                        <div className="flex items-center gap-2 mb-2 text-blue-600 font-bold justify-center bg-blue-50 py-2 rounded-full w-40 mx-auto text-xs">
                             <i className={`fa-solid ${situation.icon}`}></i> {situation.label}ã‚·ãƒŠãƒªã‚ª
                        </div>
                        <h2 className="text-2xl font-bold text-center mt-4 mb-2">ã‚ãªãŸã®å½¹å‰²ã¯ï¼Ÿ</h2>
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8 pt-4">
                            {roles.map(r => (
                                <button key={r.id} onClick={() => { setRole(r.label); setStep('sim'); }} className="p-5 border-2 border-white bg-white shadow-sm rounded-xl hover:border-blue-500 hover:bg-blue-100 active:bg-blue-200 transition-all text-left">
                                    <div className="pointer-events-none">
                                        <div className="font-bold text-slate-800">{r.label}</div>
                                        <div className="text-[10px] text-slate-500 mt-1">{r.description}</div>
                                    </div>
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );

            // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”»é¢
            if (step === 'sim') {
                const s = scenario[currentIndex];
                const h = hintData[situation.id]?.[s.id];
                const progress = ((currentIndex + 1) / scenario.length) * 100;

                return (
                    <div className="min-h-screen bg-slate-50 text-slate-900 p-4 pb-20 pt-4">
                        <div className="max-w-2xl mx-auto">
                            <div className="flex justify-between items-end mb-4 px-1">
                                <div>
                                    <span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Scenario</span>
                                    <div className="flex items-center gap-2 text-slate-800 font-bold">
                                        <i className={`fa-solid ${situation.icon} ${situation.color}`}></i> {situation.label}
                                    </div>
                                </div>
                                <div className="text-right text-blue-600 font-bold text-sm">{role}</div>
                            </div>
                            <div className="w-full bg-slate-200 h-1.5 rounded-full mb-6 overflow-hidden">
                                <div className="bg-blue-600 h-full transition-all duration-500" style={{ width: `${progress}%` }}></div>
                            </div>

                            <div className="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-200">
                                <div className="bg-slate-800 p-6 flex items-center gap-4 text-white">
                                    <div className="p-3 bg-blue-600 rounded-lg"><i className={`fa-solid ${s.icon} text-xl text-white`}></i></div>
                                    <div>
                                        <div className="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Step {currentIndex + 1} / 7</div>
                                        <h2 className="text-xl font-bold">{s.title}</h2>
                                    </div>
                                </div>
                                <div className="p-6 space-y-6">
                                    <div className="bg-blue-50 border border-blue-100 p-4 rounded-xl">
                                        <h4 className="text-[10px] font-bold text-blue-500 uppercase mb-1">ã‚¹ãƒ†ãƒƒãƒ—ã®ç›®çš„</h4>
                                        <p className="text-sm font-bold text-slate-800">{s.intent}</p>
                                    </div>
                                    <p className="text-sm italic text-slate-600 border-l-4 border-amber-400 pl-3">"{s.context}"</p>
                                    
                                    {showHint ? (
                                        <div className="bg-amber-50 border border-amber-200 rounded-xl p-5 animate-fadeIn">
                                            <h4 className="text-amber-800 font-bold text-xs mb-3 flex items-center gap-2">
                                                <i className="fa-regular fa-lightbulb"></i> ãƒ’ãƒ³ãƒˆ
                                            </h4>
                                            <ul className="space-y-2 mb-4">
                                                {h ? h.hint.map((txt, i) => (
                                                    <li key={i} className="text-slate-700 text-xs bg-white p-3 rounded-lg border border-amber-100 shadow-sm font-medium italic leading-relaxed">" {txt} "</li>
                                                )) : <li className="text-xs text-slate-500">ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã«ã¯ãƒ’ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚</li>}
                                            </ul>
                                            {h?.point && <div className="text-[10px] text-amber-900 bg-amber-200/40 p-2 rounded leading-relaxed"><span className="font-bold">ğŸ’¡ POINT:</span> {h.point}</div>}
                                        </div>
                                    ) : (
                                        <button disabled={hintsUsed >= 2} onClick={() => {setShowHint(true); setHintsUsed(hintsUsed+1)}} className={`w-full py-3 rounded-xl flex items-center justify-center gap-2 font-bold transition-all ${hintsUsed < 2 ? 'bg-amber-100 text-amber-700 border border-amber-200' : 'bg-slate-100 text-slate-400 border border-slate-200'}`}>
                                            <i className="fa-solid fa-lightbulb"></i> ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤º (æ®‹ã‚Š{Math.max(0, 2 - hintsUsed)}å›)
                                        </button>
                                    )}

                                    <div className="space-y-2">
                                        <label className="text-[10px] font-bold text-slate-400 uppercase px-1">æ€è€ƒã‚’ãƒ¡ãƒ¢</label>
                                        <textarea className="w-full p-4 border-2 border-slate-100 rounded-xl focus:border-blue-500 outline-none h-40 text-slate-800 text-sm leading-relaxed shadow-inner" placeholder="ä»Šã€æœ€å„ªå…ˆã§è€ƒãˆã‚‹ã“ã¨ã¯..." value={currentInput} onChange={e => setCurrentInput(e.target.value)} />
                                    </div>
                                    <button onClick={handleNext} className="w-full py-4 bg-blue-600 text-white font-bold rounded-xl shadow-lg active:scale-95 transition-transform">
                                        {currentIndex === 6 ? 'æ€è€ƒã®ã¾ã¨ã‚ã¸' : 'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // çµæœç”»é¢
            if (step === 'result') return (
                <div className="min-h-screen bg-slate-50 text-slate-900 p-4 pt-8 pb-20">
                    <div className="max-w-3xl mx-auto space-y-6 text-center">
                        <div className="bg-white rounded-2xl shadow-xl p-8 border-b-8 border-blue-600">
                            <i className="fa-solid fa-circle-check text-5xl text-blue-600 mb-4"></i>
                            <h2 className="text-2xl font-bold">è¨“ç·´ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</h2>
                            <p className="text-slate-500 text-sm mt-2 italic">è‡ªåˆ†ã®æ€è€ƒãƒ­ã‚°ã‚’AIã«åˆ†æã—ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†ã€‚</p>
                        </div>
                        <div className="bg-white rounded-2xl shadow-xl p-6 border border-slate-200 text-left">
                            <div className="flex flex-col sm:flex-row items-center justify-between mb-6 border-b pb-4 gap-4">
                                <h3 className="font-bold">ã‚ãªãŸã®æ€è€ƒãƒ­ã‚°</h3>
                                <button onClick={copyToClipboard} className={`w-full sm:w-auto px-6 py-3 rounded-xl text-white font-bold text-sm transition-all shadow-md ${copyStatus.includes('âœ…') ? 'bg-green-600 scale-105' : 'bg-blue-600'}`}>
                                    <i className={`fa-solid ${copyStatus.includes('âœ…') ? 'fa-check' : 'fa-copy'} mr-2`}></i> {copyStatus}
                                </button>
                            </div>
                            <div className="space-y-4 max-h-[400px] overflow-y-auto pr-2 bg-slate-50 p-4 rounded-xl">
                                {scenario.map(s => (
                                    <div key={s.id} className="pb-4 border-b border-slate-200 last:border-0">
                                        <div className="text-[10px] font-bold text-blue-600 mb-1">{s.title}</div>
                                        <div className="text-sm text-slate-700 leading-relaxed">{answers[s.id]?.text || <span className="text-slate-300">æœªå…¥åŠ›</span>}</div>
                                    </div>
                                ))}
                            </div>
                            <div className="mt-8 p-8 bg-slate-900 rounded-3xl text-white text-center shadow-2xl">
                                <h4 className="font-bold text-xl mb-3">AIã¨å¯¾è©±ã‚’å§‹ã‚ã‚‹</h4>
                                <p className="text-xs text-slate-400 mb-8 leading-relaxed">ä¸Šã®ãƒœã‚¿ãƒ³ã§ãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚ChatGPTç­‰ã®AIã‚¢ãƒ—ãƒªã‚’ç«‹ã¡ä¸Šã’ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚</p>
                                <button onClick={copyToClipboard} className="w-full py-5 bg-blue-600 rounded-2xl font-bold text-lg shadow-lg active:scale-95 transition-transform">ãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å¯¾è©±ã™ã‚‹</button>
                            </div>
                        </div>
                        <button onClick={() => location.reload()} className="text-slate-400 text-xs underline">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
